<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Cafe.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">com1003_cafe</a> &gt; <a href="index.source.html" class="el_package">uk.ac.sheffield.com1003.cafe</a> &gt; <span class="el_source">Cafe.java</span></div><h1>Cafe.java</h1><pre class="source lang-java linenums">package uk.ac.sheffield.com1003.cafe;

import uk.ac.sheffield.com1003.cafe.exceptions.CafeOutOfCapacityException;
import uk.ac.sheffield.com1003.cafe.exceptions.RecipeNotFoundException;

public class Cafe {
    private String name;
    private Recipe[] menu;
    private Order[] orders;

    private int indexNextOrderToPlace;
    private int indexNextOrderToServe;
    private int nRecipes;

    /**
     * Constructor that initialises name to &quot;Cafe&quot;, menu
     * size to 10 and capacity (number of orders) to 100.
     */
    public Cafe() {
<span class="nc" id="L20">        this(&quot;Cafe&quot;);</span>
<span class="nc" id="L21">    }</span>

    /**
     * Constructor that takes cafe name as parameter, and 
     * initialises menu size to 10 and capacity (number of orders) to 100.
     */
    public Cafe(String name) {
<span class="fc" id="L28">        this(name, 10, 100);</span>
<span class="fc" id="L29">    }</span>

    /**
     * Constructor that takes the cafe name, menu size and
     * capacity (number of orders) as parameters.
     */
<span class="fc" id="L35">    public Cafe(String name, int sizeMenu, int orderCapacity) {</span>
<span class="fc" id="L36">        this.name = name;</span>
<span class="fc" id="L37">        menu = new Recipe[sizeMenu];</span>
<span class="fc" id="L38">        orders = new Order[orderCapacity];</span>
<span class="fc" id="L39">        indexNextOrderToPlace = 0;</span>
<span class="fc" id="L40">        indexNextOrderToServe = 0;</span>
<span class="fc" id="L41">        nRecipes = 0;</span>
<span class="fc" id="L42">    }</span>

    /**
     * Returns greeting string
     * @return &quot;Welcome to &lt;cafe name&gt;&quot;
     */

    public String greeting() {
<span class="fc" id="L50">        return &quot;Welcome to &quot; + this.getName();</span>
    }

    /**
     * Getter for cafe name
     * @return Cafe name
     */
    public String getName() {
<span class="fc" id="L58">        return name;</span>
    }

    /**
     * Add the given recipe to the menu.
     * 
     * @param newRecipe Recipe to be added to menu
     * @return Returns true if there is space in the menu and new recipe is successfully added; false otherwise
     */
    public boolean addRecipe(Recipe newRecipe) {
<span class="fc" id="L68">        int i = 0;</span>
<span class="fc" id="L69">        boolean added = false;</span>
<span class="pc bpc" id="L70" title="1 of 4 branches missed.">        while (i &lt; menu.length &amp;&amp; !added) {</span>
<span class="fc bfc" id="L71" title="All 2 branches covered.">            if (menu[i] == null) {</span>
<span class="fc" id="L72">                menu[i] = newRecipe;</span>
<span class="fc" id="L73">                nRecipes++;</span>
<span class="fc" id="L74">                added = true;</span>
            } else
<span class="fc" id="L76">                i++;</span>
        }
<span class="fc" id="L78">        return added;</span>
    }

    /**
     * Find recipe with given name and remove it from the menu.
     * Assumes there are no duplicated recipe names.
     * @param recipeName Name of the recipe to be removed
     */
    public void removeRecipe(String recipeName) throws RecipeNotFoundException {
<span class="nc bnc" id="L87" title="All 2 branches missed.">        for (int i = 0; i &lt; nRecipes; i++) {</span>
<span class="nc bnc" id="L88" title="All 2 branches missed.">            if (menu[i].getName().equals(recipeName)) {</span>
<span class="nc" id="L89">                nRecipes--;</span>
<span class="nc" id="L90">                menu[i] = null;</span>
            }
        }
<span class="nc" id="L93">        throw new RecipeNotFoundException();</span>
    }

    /**
     * Returns the current list of recipes in the menu excluding empty/null elements
     * 
     * @return Array of recipes contained in the menu (excluding nulls)
     */
    public Recipe[] getMenu() {
<span class="fc" id="L102">        Recipe[] actualMenu = new Recipe[nRecipes];</span>
<span class="fc" id="L103">        int next = 0;</span>
<span class="fc bfc" id="L104" title="All 2 branches covered.">        for (int i = 0; i &lt; menu.length; i++) {</span>
<span class="fc bfc" id="L105" title="All 2 branches covered.">            if (menu[i] != null) {</span>
<span class="fc" id="L106">                actualMenu[next] = menu[i];</span>
<span class="fc" id="L107">                next++;</span>
            }
        }
<span class="fc" id="L110">        return actualMenu;</span>
    }

    /**
     * Print a list of orders not yet served in the following format
     * Pending Orders:
     * &lt;Output of call to {@link Order#toString()}; one pending order per line&gt;
     */
    public void printPendingOrders() {
<span class="fc" id="L119">        System.out.println(&quot;Pending Orders:&quot;);</span>
<span class="fc bfc" id="L120" title="All 2 branches covered.">        for (Order order : orders) {</span>
<span class="pc bpc" id="L121" title="1 of 2 branches missed.">            if (order != null) System.out.println(order.toString());</span>
        }
<span class="fc" id="L123">    }</span>

    /**
     * Print the full menu in the following format:
     * ==========
     * &lt;Output of call to {@link Cafe#greeting()}&gt;
     * Menu
     * ==========
     * &lt;Recipe name&gt; - &lt;Recipe price&gt; (one line per recipe)
     * ==========
     * Enjoy!
     */
    public void printMenu() {
<span class="fc" id="L136">        Recipe[] recipes = getMenu();</span>
<span class="fc" id="L137">        System.out.println(&quot;==========&quot;);</span>
<span class="fc" id="L138">        System.out.println(greeting());</span>
<span class="fc" id="L139">        System.out.println(&quot;Menu&quot;);</span>
<span class="fc" id="L140">        System.out.println(&quot;==========&quot;);</span>
<span class="fc bfc" id="L141" title="All 2 branches covered.">        for (int i = 0; i &lt; nRecipes; i++) {</span>
<span class="fc" id="L142">            System.out.println(recipes[i].getName() + &quot; - &quot; + recipes[i].getPrice());</span>
        }
<span class="fc" id="L144">        System.out.println(&quot;==========&quot;);</span>
<span class="fc" id="L145">        System.out.println(&quot;Enjoy!&quot;);</span>
<span class="fc" id="L146">    };</span>


    /**
     * Place an order for a given recipe name with a given amount of money.
     *
     * @param recipeName The name of the recipe being ordered
     * @param amountPaid Money handed when placing order
     * @param customerName Name of customer placing order
     * @return True if the recipe name exists in the menu and the amount paid is sufficient; return false otherwise
     * @throws RecipeNotFoundException if the recipe name does not exist in the menu
     * @throws CafeOutOfCapacityException if the cafe cannot take any more orders and is out of capacity
     */
    public boolean placeOrder(String recipeName, String customerName, double amountPaid) throws RecipeNotFoundException, CafeOutOfCapacityException {
<span class="fc" id="L160">        Recipe recipe = null; //initialise array</span>
        //checks whether the recipe exists on the menu
<span class="pc bpc" id="L162" title="1 of 2 branches missed.">        for (Recipe value : menu) {</span>
<span class="pc bpc" id="L163" title="1 of 2 branches missed.">            if (value.getName().equals(recipeName)) {</span>
<span class="fc" id="L164">                recipe = value;</span>
<span class="fc" id="L165">                break;</span>
            }
        }

<span class="pc bpc" id="L169" title="1 of 2 branches missed.">        if (recipe == null) throw new RecipeNotFoundException();</span>

        //checks whether the cafe is out of capacity
<span class="fc bfc" id="L172" title="All 2 branches covered.">        if (indexNextOrderToPlace &gt;= orders.length) throw new CafeOutOfCapacityException();</span>
        //increment the amount of orders placed index
<span class="pc bpc" id="L174" title="1 of 2 branches missed.">        if (recipe.getPrice() &lt;= amountPaid) {</span>
<span class="fc" id="L175">            orders[indexNextOrderToPlace] = new Order(recipe, customerName, amountPaid);</span>
<span class="fc" id="L176">            indexNextOrderToPlace++;</span>
<span class="fc" id="L177">            return true;</span>
        }
<span class="nc" id="L179">        return false;</span>
    }

    /**
     * Find a recipe in the menu given a recipe name
     * @param recipeName Name of the recipe to find
     * @return The recipe found or null otherwise
     */
    private Recipe findRecipe(String recipeName) {
<span class="nc" id="L188">        int i = 0;</span>
<span class="nc bnc" id="L189" title="All 2 branches missed.">        while (i &lt; menu.length) {</span>
<span class="nc bnc" id="L190" title="All 4 branches missed.">            if (menu[i] != null &amp;&amp; menu[i].getName().equals(recipeName))</span>
<span class="nc" id="L191">                return menu[i];</span>
<span class="nc" id="L192">            i++;</span>
        }
<span class="nc" id="L194">        return null;</span>
    }

    /**
     * If there is an order to serve, serves it ({@link Order#serve()}) and increments {@link Cafe#indexNextOrderToServe}
     * @return The updated served order, or null of there is no order to serve.
     */
    public Order serveOrder() throws CafeOutOfCapacityException {
<span class="nc bnc" id="L202" title="All 2 branches missed.">        if (indexNextOrderToServe &gt;= orders.length) throw new CafeOutOfCapacityException();</span>
<span class="nc" id="L203">        Order orderToBeServed = orders[indexNextOrderToServe];</span>
<span class="nc bnc" id="L204" title="All 2 branches missed.">        if (orderToBeServed == null) return null;</span>
<span class="nc" id="L205">        orderToBeServed.serve();</span>
<span class="nc" id="L206">        indexNextOrderToServe++;</span>
<span class="nc" id="L207">        return orderToBeServed;</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.9.202303310957</span></div></body></html>